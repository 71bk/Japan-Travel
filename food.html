<!DOCTYPE html>
<html lang="zh-Hant" data-theme="light">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ç¾é£Ÿè©³ç´°ï½œé€šç”¨æ¨¡æ¿ï¼ˆå«æ·±/æ·ºè‰²ä¸»é¡Œåˆ‡æ›ï¼‰</title>
  <style>
    :root {
      --bg: #f5f7fb;
      --fg: #0f172a;
      --muted: #475569;
      --brand: #2563eb;
      --card: #ffffff;
      --border: #e2e8f0;
      --radius: 14px;
      --shadow: 0 4px 12px rgba(0, 0, 0, .12);
      --hero-overlay-from: rgba(255, 255, 255, 0);
      --hero-overlay-to: rgba(255, 255, 255, .70);
      --hero-img-brightness: 1.08;
    }

    [data-theme="dark"] {
      --bg: #0b132b;
      --fg: #f8fafc;
      --muted: #94a3b8;
      --brand: #60a5fa;
      --card: #0f172a;
      --border: #1f2937;
      --shadow: 0 10px 30px rgba(0, 0, 0, .28);
      --hero-overlay-from: rgba(0, 0, 0, 0);
      --hero-overlay-to: rgba(0, 0, 0, .65);
      --hero-img-brightness: 1.0;
    }

    * {
      box-sizing: border-box
    }

    html,
    body {
      margin: 0;
      padding: 0;
      background: var(--bg);
      color: var(--fg);
      font-family: "Noto Sans TC", system-ui, -apple-system, "Segoe UI", Roboto, Helvetica, Arial
    }

    a {
      color: var(--brand);
      text-decoration: none
    }

    a:hover {
      text-decoration: underline
    }

    .container {
      max-width: 1080px;
      margin-inline: auto;
      padding: 24px;
      position: relative
    }

    .theme-toggle {
      position: fixed;
      right: 24px;
      top: 16px;
      z-index: 1000;
      border: 1px solid var(--border);
      background: var(--card);
      color: var(--fg);
      padding: 8px 12px;
      border-radius: 999px;
      box-shadow: var(--shadow);
      cursor: pointer
    }

    .theme-toggle:hover {
      filter: brightness(.98)
    }

    .hero {
      position: relative;
      overflow: hidden;
      border-radius: var(--radius);
      background: #e2e8f0;
      box-shadow: var(--shadow)
    }

    .hero-img {
      width: 100%;
      display: block;
      aspect-ratio: 16/9;
      object-fit: cover;
      opacity: .98;
      filter: brightness(var(--hero-img-brightness))
    }

    .hero-content {
      position: absolute;
      inset: 0;
      display: flex;
      align-items: flex-end;
      background: linear-gradient(180deg, var(--hero-overlay-from) 40%, var(--hero-overlay-to) 100%)
    }

    .hero-text {
      padding: 28px
    }

    .title {
      margin: 0 0 6px;
      font-size: clamp(24px, 3.2vw, 40px);
      letter-spacing: .02em
    }

    .subtitle {
      margin: 0;
      color: var(--muted)
    }

    .grid {
      display: grid;
      grid-template-columns: 1fr 320px;
      gap: 28px;
      margin-top: 28px
    }

    @media (max-width:900px) {
      .grid {
        grid-template-columns: 1fr
      }
    }

    .card {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow)
    }

    .card>* {
      padding: 20px
    }

    .card h2 {
      margin: 0 0 8px;
      font-size: clamp(18px, 2.4vw, 24px)
    }

    .card p {
      margin: 0 0 10px;
      line-height: 1.75
    }

    .card ul {
      margin: 0;
      padding-left: 20px
    }

    .aside {
      position: sticky;
      top: 16px;
      height: fit-content
    }

    .toc a {
      display: block;
      padding: 10px 14px;
      border-bottom: 1px dashed var(--border);
      color: inherit
    }

    .toc a:hover {
      background: rgba(0, 0, 0, .04)
    }

    .pill {
      display: inline-flex;
      gap: 8px;
      align-items: center;
      background: rgba(0, 0, 0, .04);
      color: inherit;
      border: 1px solid var(--border);
      padding: 6px 10px;
      border-radius: 999px;
      font-size: 12px
    }

    [data-theme="dark"] .pill {
      background: rgba(255, 255, 255, .06)
    }

    .back {
      display: inline-block;
      margin-top: 18px;
      background: var(--brand);
      color: #fff;
      padding: 10px 14px;
      border-radius: 10px
    }

    .back:hover {
      filter: brightness(.95)
    }
  </style>
</head>

<body>
  <div class="container">
    <button class="theme-toggle" id="themeToggle" aria-pressed="false" title="åˆ‡æ›ä¸»é¡Œ">ğŸŒ™ æ·±è‰²</button>

    <section class="hero" id="top">
      <img class="hero-img" id="heroImg" alt="food hero" />
      <div class="hero-content">
        <div class="hero-text">
          <h1 class="title" id="foodTitle">ç¾é£Ÿåç¨±</h1>
          <p class="subtitle" id="foodSubtitle">åœ°å€ï¼ä¸€å¥è©±äº®é»</p>
          <div class="meta" aria-label="meta">
            <span class="pill" id="metaPrice">åƒ¹ä½ï¼šâ€”</span>
            <span class="pill" id="metaHours">ç‡Ÿæ¥­ï¼šâ€”</span>
          </div>
        </div>
      </div>
    </section>

    <div class="grid">
      <main class="content">
        <article class="card" id="intro">
          <div>
            <h2>ç¾é£Ÿä»‹ç´¹</h2>
            <p id="introText">ä»¥ URL åƒæ•¸æˆ– data.js è‡ªå‹•å¸¶å…¥ï¼›è‹¥ç„¡ï¼Œé€™è£¡æœƒé¡¯ç¤ºç¤ºç¯„æ–‡å­—ã€‚</p>
          </div>
        </article>

        <article class="card" id="info">
          <div>
            <h2>åº—å®¶è³‡è¨Š</h2>
            <p id="addrText">åœ°å€ï¼šâ€”</p>
            <p id="hoursText">ç‡Ÿæ¥­æ™‚é–“ï¼šâ€”</p>
            <p id="priceText">åƒ¹ä½åƒè€ƒï¼šâ€”</p>
          </div>
        </article>

        <article class="card" id="tips">
          <div>
            <h2>æ¨è–¦åƒæ³• / å¿…é»</h2>
            <ul id="tipsList">
              <li>ç¯„ä¾‹ï¼šå¯åŠ å…¥é®­é­šåµåŠ é‡</li>
            </ul>
          </div>
        </article>

        <article class="card" id="access">
          <div>
            <h2>äº¤é€šæ–¹å¼</h2>
            <p id="accessText">JRï¼å…¬è»Šï¼æ­¥è¡Œèªªæ˜ï¼ˆé¸å¡«ï¼‰ã€‚</p>
            <a id="backLink" class="back" href="#">â† è¿”å›åœ°å€</a>
          </div>
        </article>
        

      </main>

      <aside class="aside">
        <nav class="card toc" aria-label="é å…§å°è¦½">
          <div>
            <h2 style="padding:20px 20px 10px;margin:0">å¿«é€Ÿå°è¦½</h2>
            <a href="#intro">ç¾é£Ÿä»‹ç´¹</a>
            <a href="#info">åº—å®¶è³‡è¨Š</a>
            <a href="#tips">æ¨è–¦åƒæ³•</a>
            <a href="#access">äº¤é€šæ–¹å¼</a>
            <a href="#top">å›åˆ°æœ€ä¸Šæ–¹ â†‘</a>
          </div>
        </nav>
      </aside>
    </div>
  </div>

  <script type="module">
    const qp = new URLSearchParams(location.search);
    const region = qp.get('region') || '';
    const category = qp.get('category') || 'ç¾é£Ÿ';
    const name = qp.get('name') || qp.get('spot') || '';
    const imgParam = qp.get('img');
    const subtitle = qp.get('subtitle');

    // å¯ç”± URL ç›´æ¥å¸¶å…¥çš„æ¬„ä½ï¼ˆå¾Œå‚™ï¼‰
    const addrParam = qp.get('address');
    const hoursParam = qp.get('hours');
    const priceParam = qp.get('price');
    const introParam = qp.get('intro');
    const tipsParam = qp.get('tips');   // ; åˆ†éš”
    const accessParam = qp.get('access');

    const guessImg = region && name ? `../image/pic/${region}/${name}.jpg` : '';
    const $ = (id) => document.getElementById(id);

    // åˆå§‹å¡«å…¥
    $('foodTitle').textContent = name || 'ç¾é£Ÿåç¨±';
    $('foodSubtitle').textContent = subtitle || (region ? `${region}ï½œäººæ°£å¿…åƒ` : 'åœ°å€ï¼ä¸€å¥è©±äº®é»');
    $('heroImg').src = imgParam || guessImg || 'data:image/svg+xml,%3Csvg xmlns%3D"http://www.w3.org/2000/svg" viewBox%3D"0 0 1600 900"%3E%3Crect width%3D"1600" height%3D"900" fill%3D"%23e2e8f0"/%3E%3C/svg%3E';
    if (introParam) $('introText').textContent = introParam;
    if (addrParam) $('addrText').textContent = `åœ°å€ï¼š${addrParam}`;
    if (hoursParam) $('hoursText').textContent = `ç‡Ÿæ¥­æ™‚é–“ï¼š${hoursParam}`;
    if (priceParam) $('priceText').textContent = `åƒ¹ä½åƒè€ƒï¼š${priceParam}`;
    if (tipsParam) $('tipsList').innerHTML = tipsParam.split(';').map(s => `<li>${s.trim()}</li>`).join('');
    if (accessParam) $('accessText').textContent = accessParam;

    // å˜—è©¦è¼‰å…¥ data.js è¦†è“‹ï¼ˆå’Œ detail.html åŒæµç¨‹ã€å¤šäº†ç¾é£Ÿæ¬„ä½ï¼‰
    const DATA_CANDIDATES = ['../js/data.js', '../../js/data.js', './js/data.js', '../data.js'];
    for (const p of DATA_CANDIDATES) {
      try {
        const mod = await import(p);
        const dataset = mod.data || mod.default; if (!dataset) continue;
        const r = dataset[region]; if (!r) break;

        // ç¾é£Ÿå¯ç‚ºå­—ä¸²æˆ–ç‰©ä»¶
        const arr = Array.isArray(r.ç¾é£Ÿ) ? r.ç¾é£Ÿ : [];
        const item = arr.map(v => typeof v === 'string' ? ({ åç¨±: v, èªªæ˜: '' }) : v)
          .find(v => (v.åç¨± || '') === name);
        if (!item) break;

        const d = item.è©³ç´° || {};
        if (item.åç¨±) $('foodTitle').textContent = item.åç¨±;
        $('foodSubtitle').textContent = d.å‰¯æ¨™ || item.èªªæ˜ || $('foodSubtitle').textContent;
        $('introText').textContent = d.ä»‹ç´¹ || item.èªªæ˜ || $('introText').textContent;

        if (d.åœ°å€) $('addrText').textContent = `åœ°å€ï¼š${d.åœ°å€}`;
        if (d.ç‡Ÿæ¥­æ™‚é–“) $('hoursText').textContent = `ç‡Ÿæ¥­æ™‚é–“ï¼š${d.ç‡Ÿæ¥­æ™‚é–“}`;
        if (d.åƒ¹ä½) $('priceText').textContent = `åƒ¹ä½åƒè€ƒï¼š${d.åƒ¹ä½}`;
        if (d.æ¨è–¦) $('tipsList').innerHTML = (Array.isArray(d.æ¨è–¦) ? d.æ¨è–¦ : String(d.æ¨è–¦).split(';')).map(s => `<li>${s.trim()}</li>`).join('');
        if (d.äº¤é€š) $('accessText').textContent = d.äº¤é€š;

        // Meta pill
        if (d.åƒ¹ä½) $('metaPrice').textContent = `åƒ¹ä½ï¼š${d.åƒ¹ä½}`;
        if (d.ç‡Ÿæ¥­æ™‚é–“) $('metaHours').textContent = `ç‡Ÿæ¥­ï¼š${d.ç‡Ÿæ¥­æ™‚é–“}`;

        const img = d.åœ–ç‰‡ || guessImg; if (img) $('heroImg').src = img;
        break;
      } catch (e) { /* ç¹¼çºŒå˜—è©¦ä¸‹ä¸€å€‹è·¯å¾‘ */ }
    }

    // ä¸»é¡Œåˆ‡æ›ï¼šåŒ detail.html
    const key = 'spot-theme';
    const prefersDark = matchMedia && matchMedia('(prefers-color-scheme: dark)').matches;
    const saved = localStorage.getItem(key);
    const initial = saved || (prefersDark ? 'dark' : 'light');
    document.documentElement.setAttribute('data-theme', initial);
    const btn = $('themeToggle');
    const setLabel = (m) => { btn.textContent = m === 'dark' ? 'â˜€ï¸ æ·ºè‰²' : 'ğŸŒ™ æ·±è‰²'; btn.setAttribute('aria-pressed', String(m === 'dark')); };
    setLabel(initial);
    btn.addEventListener('click', () => {
      const cur = document.documentElement.getAttribute('data-theme');
      const next = cur === 'dark' ? 'light' : 'dark';
      document.documentElement.setAttribute('data-theme', next);
      localStorage.setItem(key, next);
      setLabel(next);
    });

    // è¿”å›å¸¶åœ°å€éŒ¨é»
    const back = document.getElementById('backLink');
    if (back) {
      const url = new URL('index.html', location.href); // åŒå±¤
      if (typeof region === 'string' && region) {
        url.hash = encodeURIComponent(region);
      }
      back.href = url.href;
      back.addEventListener('click', (e) => {
        e.preventDefault();
        location.assign(url.href); // ä¿éšªè·³è½‰
      });
      
    }

  </script>
</body>

</html>